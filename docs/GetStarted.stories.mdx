import { Meta } from '@storybook/addon-docs/blocks';
import { Prism as SyntaxHighlighter } from 'react-syntax-highlighter';
import { materialLight } from 'react-syntax-highlighter/dist/esm/styles/prism';

import F2SampleHttpApp from '../sample/f2-sample-http/src/main/kotlin/f2/sample/http/F2SampleHttpApp.kt';
import BuildGradleKts from '../sample/f2-sample-http/build.gradle.kts';

<Meta title="Sample/F2 Sample Http" parameters={{ previewTabs: { canvas: { hidden: true } } }} />

# F2 Sample Http

This exemple show how to implement function executable throw http

## SHA256 Function

 * Gradle dependency for http protocol
```
city.smartb.f2:f2-spring-boot-starter-function-http:${F2_VERISON}
```

<SyntaxHighlighter  language="kotlin" style={materialLight}>
    {BuildGradleKts}
</SyntaxHighlighter>

 * Implement function

<SyntaxHighlighter  language="kotlin" style={materialLight}>
    {F2SampleHttpApp}
</SyntaxHighlighter>

## Build Standalone Application for Docker

 * Build docker image
```bash
./gradlew bootBuildImage
```

 * Start Docker Image
```bash
docker run -p 8080:8080 docker.io/library/f2-sample-http:latest
```

## Call function

```bash
curl http://localhost:8080/sha256/test

 curl -d '{"id": "b0273e59-3717-4aab-838f-8511dffaa71d"}' -X POST http://localhost:8080/sha256 -H "Content-Type: application/json"
```

